/* shikimori-temset2: Modern Glassmorphism & Twitch-style Theme */

:root {
  /* Акценты Twitch (можно переопределить с сайта) */
  --accent-primary: #9146ff;
  --accent-hover: #772ce8;
  --accent-active: #5c16c5;
  --accent-glow: rgba(145, 70, 255, 0.6);

  /* Эффекты стекла (Glassmorphism) */
  --glass-bg: rgba(18, 18, 20, 0.65);
  --glass-bg-hover: rgba(25, 25, 28, 0.8);
  --glass-blur: blur(20px);
  --glass-border: 1px solid rgba(255, 255, 255, 0.08);
  --glass-radius: 12px;

  /* Цвета текста */
  --text-main: #e0e0e0;
  --text-muted: #a0a0a0;

  /* Тайминги анимации */
  --transition-fast: 0.2s ease-in-out;
  --transition-smooth: 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

/* 
 * 1. Фон.
 * Используем фон, загруженный в настройках Shikimori.
 * Делаем фон фиксированным и покрывающим весь экран.
 */
body {
  background-size: cover !important;
  background-position: center !important;
  background-attachment: fixed !important;
  color: var(--text-main) !important;
}

/* Скрываем стандартные фоны Shikimori, чтобы сделать их прозрачными */
.p-profiles .profile-head,
.p-profiles .profile-content,
.b-stats_bar,
.b-stats_bar .title,
.b-stats_bar .bar,
.cc-2,
.c-column,
.l-top_menu-v2,
header.head {
  background-color: transparent !important;
  background-image: none !important;
  border: none !important;
}

/* 
 * 2. Эффект стекла (Glassmorphism) и отступы (как в старом дизайне)
 */
.l-page {
  background: var(--glass-bg) !important;
  backdrop-filter: var(--glass-blur) !important;
  -webkit-backdrop-filter: var(--glass-blur) !important;
  box-shadow: 0px 0px 4px 1px #00000040 !important;
  margin-top: 50px !important;
  margin-bottom: 50px !important;
  padding-left: 20px !important;
  padding-right: 20px !important;
  border-radius: var(--glass-radius);
}

@media screen and (max-width: 768px) {
  .l-page {
    padding-left: 10px !important;
    padding-right: 10px !important;
  }
}

.block,
.menu-dropdown.main .submenu,
.menu-dropdown.profile .submenu,
.b-catalog_entry .cover,
.b-news_wall-topic,
.tooltip-inner,
.b-post,
.b-comment {
  background: var(--glass-bg) !important;
  backdrop-filter: var(--glass-blur) !important;
  -webkit-backdrop-filter: var(--glass-blur) !important;
  border: var(--glass-border) !important;
  border-radius: var(--glass-radius) !important;
  box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.3) !important;
}

/* 
 * Восстановление структуры колонок и шапки из старого дизайна (core.css)
 */
.p-profiles .profile-head {
  display: flex;
  flex-wrap: wrap;
  justify-content: space-between;
}

.p-profiles .profile-head .c-history {
  order: 2;
  flex-basis: 20% !important;
  width: 20%;
  margin-bottom: 0;
  margin-left: 0;
  margin-top: 0;
}

.p-profiles .profile-head .c-brief {
  order: 0;
  flex-basis: 100%;
  width: 100%;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.p-profiles .profile-head .c-brief .avatar {
  order: 1;
  flex-basis: 20% !important;
  width: 20%;
}

.p-profiles .profile-head .c-brief .head {
  order: 0;
  flex-basis: 79% !important;
  width: 79%;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
}

.p-profiles .profile-head .c-info {
  order: 1;
  flex-basis: 79% !important;
  width: 79%;
  overflow: visible;
  position: relative;
}

@media screen and (max-width: 768px) {
  .p-profiles .profile-head .c-brief .head h1 {
    font-size: 32px;
  }
}

@media screen and (max-width: 480px) {
  .p-profiles .profile-head .c-brief .head h1 {
    font-size: 24px;
  }
  .p-profiles .profile-head .c-brief {
    flex-direction: column-reverse;
  }
  .p-profiles .profile-head .c-info {
    flex-basis: 100% !important;
    width: 100%;
  }
}

.p-profiles-show .profile-content .cc-2 > .c-column {
  width: 100%;
}

/* 
 * 2. Эффект стекла (Glassmorphism)
 * Назначаем размытие на основные блоки.
 */

/* 
 * 3. Цвета ссылок и текста (Twitch акцент) 
 */
a,
.b-link {
  color: var(--accent-primary) !important;
  transition: all var(--transition-fast) !important;
  text-decoration: none !important;
}

a:hover,
.b-link:hover {
  color: var(--accent-hover) !important;
  text-shadow: 0 0 8px var(--accent-glow) !important;
}

/* 
 * 4. 3D-эффект наведения на обложки (Apple-style)
 */
.b-catalog_entry,
.b-news_wall-topic,
.character,
.b-post,
.b-comment {
  transition:
    transform var(--transition-smooth),
    box-shadow var(--transition-smooth) !important;
}

.b-catalog_entry:hover,
.b-news_wall-topic:hover,
.character:hover {
  transform: translateY(-4px) scale(1.02) !important;
  box-shadow: 0 12px 40px 0 rgba(0, 0, 0, 0.5) !important;
  background: var(--glass-bg-hover) !important;
  border-color: rgba(255, 255, 255, 0.15) !important;
  z-index: 10;
}

/* Изображения обложек */
.b-catalog_entry .cover img {
  border-radius: var(--glass-radius) var(--glass-radius) 0 0 !important;
}

/* 
 * 5. Типографика и анимация ника (из старого дизайна)
 */
.profile-head .head.misc h1 {
  font-family: var(--font-family, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif);
  font-weight: 800 !important;
  font-size: 64px;
  margin-bottom: 4px;
  color: rgba(255, 255, 255, 0.2) !important; /* Прозрачный цвет для работы background-clip */
  background-image: url('https://raw.githubusercontent.com/MatveevFilipp/shikimori-temset/refs/heads/main/images/logo_pattern_B.svg');
  background-size: 200px;
  background-repeat: repeat-x;
  -webkit-background-clip: text;
  background-clip: text;
  animation: animateHead 8s linear infinite;
  transition:
    color 0.2s ease,
    text-shadow 0.2s ease;
  text-shadow: none !important; /* Убираем черную тень по умолчанию, чтобы не мешала паттерну */
}

@keyframes animateHead {
  0% {
    background-position: left 0px top 0px;
  }
  100% {
    background-position: left 200px top 0px;
  }
}

.profile-head .head.misc h1:hover {
  text-shadow: 0px 0px 8px rgba(0, 0, 0, 1) !important;
  color: var(--accent-primary) !important;
  transform: scale(1.03) !important;
}

/* Выделение текста на сайте */
::selection {
  background: var(--accent-primary) !important;
  color: #fff !important;
}

/* 
 * 6. Активность (Графики)
 */
.activity .graph.vertical .line .bar {
  animation: pulse-bar 2s ease-in-out infinite alternate !important;
}
.activity .graph.vertical .line .bar:hover {
  animation: none !important;
  background: var(--accent-primary) !important;
  box-shadow: 0 0 10px var(--accent-glow) !important;
}

@keyframes pulse-bar {
  0% {
    opacity: 0.7;
    transform: translateY(0);
  }
  100% {
    opacity: 1;
    transform: translateY(3px);
  }
}

/* Гистограммы профиля (Манга / Аниме бар) */
.bar.simple .bar.s0 {
  background: rgba(145, 70, 255, 0.3) !important;
}
.bar.simple .bar.s1 {
  background: rgba(145, 70, 255, 0.5) !important;
}
.bar.simple .bar.s2 {
  background: var(--accent-hover) !important;
}
.bar.simple .bar.s3 {
  background: var(--accent-primary) !important;
}

.b-stats_bar.anime .bar .first,
.b-stats_bar.manga .bar .first,
.b-stats_bar.lifetime .bar .first {
  background: var(--accent-primary) !important;
}
.b-stats_bar.anime .bar .second,
.b-stats_bar.manga .bar .second {
  background: var(--accent-hover) !important;
}
.b-stats_bar.anime .bar .third,
.b-stats_bar.manga .bar .third {
  background: var(--glass-bg-hover) !important;
}

/*
 * Анимация и стилизация левой колонки (c-column c-left)
 */
.p-profiles-show .profile-content .cc-2 > .c-column.c-left {
  animation: slideInLeft 0.6s ease-out forwards;
  opacity: 0;
  transform: translateX(-20px);
}

@keyframes slideInLeft {
  0% {
    opacity: 0;
    transform: translateX(-20px);
  }
  100% {
    opacity: 1;
    transform: translateX(0);
  }
}

.p-profiles-show .profile-content .cc-2 > .c-column.c-left:hover {
  transform: translateY(-2px);
  transition: transform 0.3s ease;
}

/* 
 * 7. Кнопки
 */
.b-button,
.b-button.green,
.b-button.blue {
  background: var(--glass-bg) !important;
  border: var(--glass-border) !important;
  color: var(--text-main) !important;
  backdrop-filter: var(--glass-blur) !important;
  border-radius: 8px !important;
  transition: all var(--transition-fast) !important;
}
.b-button:hover,
.b-button.green:hover,
.b-button.blue:hover {
  background: var(--accent-primary) !important;
  box-shadow: 0 0 15px var(--accent-glow) !important;
  color: white !important;
  transform: translateY(-2px) !important;
}

/* 
 * 8. Настройки вывода персонажей (Топ и Запоминающиеся)
 */
.profile-content .about.block .topCharacters,
.profile-content .about.block .memorableCharacters {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  gap: 12px;
}

.profile-content .about.block .topCharacters .character,
.profile-content .about.block .memorableCharacters .character {
  display: flex;
  flex-direction: column;
  align-items: center;
  background: var(--glass-bg) !important;
  border: var(--glass-border) !important;
  border-radius: var(--glass-radius) !important;
  padding: 8px;
  width: clamp(80px, 15vw, 120px);
  text-align: center;
}

.profile-content .about.block .character img {
  border-radius: 6px;
  margin-bottom: 8px;
  transition: transform var(--transition-smooth) ease;
}

.profile-content .about.block .character:hover img {
  transform: scale(1.08);
}
